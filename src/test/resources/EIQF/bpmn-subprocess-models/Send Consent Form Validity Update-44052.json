{"referenceId":null,"name":"Send Consent Form Validity Update","description":"","editorJson":{"resourceId":44052,"properties":{"process_id":"SendConsentFormValidatityUpdate","name":"Send Consent Form Validatity Update","documentation":"","process_author":"","process_version":"","process_namespace":"http://www.activiti.org/processdef","executionlisteners":"{\"executionListeners\":[]}","eventlisteners":"{\"eventListeners\":[]}","signaldefinitions":"[]","messagedefinitions":"[]","executionvariables":"[{\"variableName\":\"requestid\",\"variableType\":\"string\"},{\"variableName\":\"requestjson\",\"variableType\":\"string\"},{\"variableName\":\"requeststatus\",\"variableType\":\"string\"},{\"variableName\":\"hostname\",\"variableType\":\"string\"},{\"variableName\":\"resultjson\",\"variableType\":\"string\"},{\"variableName\":\"retrycount\",\"variableType\":\"integer\"},{\"variableName\":\"employmentRefId\",\"variableType\":\"string\"},{\"variableName\":\"consentIsValid\",\"variableType\":\"boolean\"},{\"variableName\":\"executionId\",\"variableType\":\"string\"},{\"variableName\":\"applicantRefId\",\"variableType\":\"string\"}]","metadata":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"startEvent1","name":"","documentation":"","executionlisteners":{"executionListeners":[]},"initiator":"","formkeydefinition":"","formreference":"","fieldstovariables":"","formproperties":"","asynchronousdefinition":false,"exclusivedefinition":false},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-8DD35970-9779-4113-BEB3-9EE0659B5A8A"}],"bounds":{"lowerRight":{"x":90,"y":90},"upperLeft":{"x":60,"y":60}},"dockers":[]},{"resourceId":"sid-B0EA86DD-0B7F-4179-AFAD-0CC200AFF151","properties":{"overrideid":"sid-B0EA86DD-0B7F-4179-AFAD-0CC200AFF151","name":"Successful?","documentation":"","asynchronousdefinition":false,"exclusivedefinition":false,"sequencefloworder":"","executionlisteners":{"executionListeners":[]}},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-F31EF6C8-5543-4E78-8002-A5545C189663"},{"resourceId":"sid-E6592794-99FD-49A5-BEDF-99E7DB7BFE99"}],"bounds":{"lowerRight":{"x":640,"y":95},"upperLeft":{"x":600,"y":55}},"dockers":[]},{"resourceId":"sid-F15382AC-8F08-4A32-9A9D-4D96901F18AD","properties":{"overrideid":"ErrorVerificationResult","name":"Error - Verification Result","documentation":"","asynchronousdefinition":false,"exclusivedefinition":false,"executionlisteners":{"executionListeners":[{"event":"start","className":"org.activiti.engine.impl.bpmn.listener.ScriptExecutionListener","fields":[{"name":"language","stringValue":"javascript"},{"name":"script","stringValue":"var count  = Number(execution.getVariable(\"retrycount\")) + 1;\nexecution.setVariable(\"retrycount\", count);"}]}]},"multiinstance_type":"None","multiinstance_cardinality":"","multiinstance_collection":"","multiinstance_variable":"","multiinstance_condition":"","isforcompensation":false,"usertasksendemail":true,"usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"initiator"},"initiatorCanCompleteTask":false}},"formkeydefinition":"","formreference":{"id":44045,"name":"Error Retry Details"},"fieldstovariables":"","duedatedefinition":"","prioritydefinition":"","categorydefinition":"","formproperties":"","tasklisteners":{"taskListeners":[]},"emailtemplate":""},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-8F2E9E7D-EFA8-4568-AB74-7A6BDF0379B0"},{"resourceId":"sid-42058F17-D3EB-4E2D-9427-512ADDF6D52B"}],"bounds":{"lowerRight":{"x":550,"y":220},"upperLeft":{"x":450,"y":140}},"dockers":[]},{"resourceId":"sid-6CDC5DA2-950E-45F4-BDD6-8F28B8B844D6","properties":{"overrideid":"SubmitVerificationResult","name":"Submit Consent Verification Update","documentation":"","restcalltask_endpoint":{"rest_url":"api/productrequest/${requestid}/applicant/${applicantRefId}/consentformstatus","http_method":"PUT","endpoint_config":{"id":"1","name":"MUS Services"}},"restcalltask_request_mapping":[{"jsonPropertyName":"valid","jsonPropertyType":"string","jsonPropertyValueRestResponseField":{"id":"consentIsValid","name":"consentIsValid","type":"boolean"},"jsonPropertyValueType":"restResponse","$$hashKey":"uiGrid-004R"},{"jsonPropertyName":"executionId","jsonPropertyType":"string","jsonPropertyValueRestResponseField":{"id":"executionId","name":"executionId","type":"string"},"jsonPropertyValueType":"restResponse","$$hashKey":"uiGrid-004T"},{"jsonPropertyType":"string","$$hashKey":"uiGrid-0055","jsonPropertyValueType":"field","jsonPropertyValueFormField":{"id":"notconfirmed","name":"Reason for Invalid - id","type":"dropdown","$$hashKey":"object:5283"},"jsonPropertyName":"consentFormProblemReason"}],"restcalltask_response_mapping":[{"jsonPropertyName":"status","processVariableName":"requeststatus","processVariableType":"string"}],"restcalltask_request_headers":[],"servicetaskfields":{"fields":[{"name":"baseEndpoint","stringValue":"1"},{"name":"baseEndpointName","stringValue":"MUS Services"},{"name":"restUrl","stringValue":"api/productrequest/${requestid}/applicant/${applicantRefId}/consentformstatus"},{"name":"httpMethod","stringValue":"PUT"}]},"executionlisteners":{"executionListeners":[]},"isforcompensation":false,"asynchronousdefinition":true,"exclusivedefinition":true},"stencil":{"id":"RestCallTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-8B5050A2-DFC1-45BD-B830-9E2201E2D053"},{"resourceId":"sid-BC7932E6-28F5-4C17-B4A1-61BFF57DB971"}],"bounds":{"lowerRight":{"x":400,"y":115},"upperLeft":{"x":300,"y":35}},"dockers":[]},{"resourceId":"sid-893B76B0-999E-49F9-88E5-D157EC0A6137","properties":{"scriptformat":"javascript","scripttext":"//","executionvariables":"","overrideid":"sid-893B76B0-999E-49F9-88E5-D157EC0A6137","name":"Evaluate Response","documentation":"","asynchronousdefinition":false,"exclusivedefinition":false,"executionlisteners":{"executionListeners":[]},"multiinstance_type":"None","multiinstance_cardinality":"","multiinstance_collection":"","multiinstance_variable":"","multiinstance_condition":"","isforcompensation":false},"stencil":{"id":"ScriptTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-51960698-5A8A-4ECE-8452-E639F1113E00"}],"bounds":{"lowerRight":{"x":550,"y":115},"upperLeft":{"x":450,"y":35}},"dockers":[]},{"resourceId":"sid-47411F58-83E3-4EF0-BE3F-37C14422A3A0","properties":{"scriptformat":"javascript","scripttext":"execution.setVariable(\"retrycount\",0);\nexecution.setVariable(\"issuccessful\",true);\n\nexecution.setVariable(\"executionId\",\"\");\nif (execution.getVariable(\"consentIsValid\") === false) {\n    var eid = execution.getEngineServices().getRuntimeService().createExecutionQuery().messageEventSubscriptionName(\"applicantConsentReceived\").processInstanceId(execution.getProcessInstanceId()).singleResult().getId();\n    print(\"Execution ID for Failed Consent:  \" + eid);\n    execution.setVariable(\"executionId\",eid);\n}","executionvariables":"","overrideid":"sid-47411F58-83E3-4EF0-BE3F-37C14422A3A0","name":"Init Request","documentation":"","asynchronousdefinition":false,"exclusivedefinition":false,"executionlisteners":{"executionListeners":[]},"multiinstance_type":"None","multiinstance_cardinality":"","multiinstance_collection":"","multiinstance_variable":"","multiinstance_condition":"","isforcompensation":false},"stencil":{"id":"ScriptTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-87E479C4-52A7-406A-8C43-03E52A2F9FB7"}],"bounds":{"lowerRight":{"x":250,"y":115},"upperLeft":{"x":150,"y":35}},"dockers":[]},{"resourceId":"sid-BDD5A696-4F8B-4CDA-A708-820F2BAF13E9","properties":{"overrideid":"ErrorVerificationResultResolve","name":"Error - Verification Result - Please Resolve!","documentation":"","asynchronousdefinition":false,"exclusivedefinition":false,"executionlisteners":{"executionListeners":[]},"multiinstance_type":"None","multiinstance_cardinality":"","multiinstance_collection":"","multiinstance_variable":"","multiinstance_condition":"","isforcompensation":false,"usertasksendemail":true,"usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"initiator"},"initiatorCanCompleteTask":false}},"formkeydefinition":"","formreference":{"id":44045,"name":"Error Retry Details"},"fieldstovariables":"","duedatedefinition":"","prioritydefinition":"","categorydefinition":"","formproperties":"","tasklisteners":{"taskListeners":[]},"emailtemplate":""},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-75FE32A5-A010-46EA-9BC6-F37AC0359780"}],"bounds":{"lowerRight":{"x":550,"y":340},"upperLeft":{"x":450,"y":260}},"dockers":[]},{"resourceId":"sid-E47487B2-A1A2-488B-82D5-9C9A95A1B8AB","properties":{"overrideid":"sid-E47487B2-A1A2-488B-82D5-9C9A95A1B8AB","name":"Exceed Retries?","documentation":"","asynchronousdefinition":false,"exclusivedefinition":false,"sequencefloworder":"","executionlisteners":{"executionListeners":[]}},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-22B06C31-AFDB-43BC-9CFA-3C0819FB3BF9"},{"resourceId":"sid-8A0D9445-9FD1-4704-A26D-706D09894002"}],"bounds":{"lowerRight":{"x":640,"y":200},"upperLeft":{"x":600,"y":160}},"dockers":[]},{"resourceId":"sid-75FE32A5-A010-46EA-9BC6-F37AC0359780","properties":{"overrideid":"sid-75FE32A5-A010-46EA-9BC6-F37AC0359780","name":"","documentation":"","conditionsequenceflow":"","executionlisteners":{"executionListeners":[]},"defaultflow":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-6CDC5DA2-950E-45F4-BDD6-8F28B8B844D6"}],"bounds":{"lowerRight":{"x":449.78125,"y":300},"upperLeft":{"x":350,"y":115.55078125}},"dockers":[{"x":50,"y":40},{"x":350,"y":300},{"x":50,"y":40}],"target":{"resourceId":"sid-6CDC5DA2-950E-45F4-BDD6-8F28B8B844D6"}},{"resourceId":"sid-D44D3BDC-E34B-44F1-8619-DC4DA3563D89","properties":{"overrideid":"sid-D44D3BDC-E34B-44F1-8619-DC4DA3563D89","name":"","documentation":"","executionlisteners":{"executionListeners":[]},"asynchronousdefinition":false,"exclusivedefinition":false},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":808,"y":89},"upperLeft":{"x":780,"y":61}},"dockers":[]},{"resourceId":"sid-8F2E9E7D-EFA8-4568-AB74-7A6BDF0379B0","properties":{"overrideid":"sid-8F2E9E7D-EFA8-4568-AB74-7A6BDF0379B0","name":"","documentation":"","conditionsequenceflow":"","executionlisteners":{"executionListeners":[]},"defaultflow":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-6CDC5DA2-950E-45F4-BDD6-8F28B8B844D6"}],"bounds":{"lowerRight":{"x":449.78125,"y":180},"upperLeft":{"x":350,"y":115.375}},"dockers":[{"x":50,"y":40},{"x":350,"y":180},{"x":50,"y":40}],"target":{"resourceId":"sid-6CDC5DA2-950E-45F4-BDD6-8F28B8B844D6"}},{"resourceId":"sid-51960698-5A8A-4ECE-8452-E639F1113E00","properties":{"overrideid":"sid-51960698-5A8A-4ECE-8452-E639F1113E00","name":"","documentation":"","conditionsequenceflow":"","executionlisteners":{"executionListeners":[]},"defaultflow":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-B0EA86DD-0B7F-4179-AFAD-0CC200AFF151"}],"bounds":{"lowerRight":{"x":600.25,"y":75},"upperLeft":{"x":550.6875,"y":75}},"dockers":[{"x":50,"y":40},{"x":20,"y":20}],"target":{"resourceId":"sid-B0EA86DD-0B7F-4179-AFAD-0CC200AFF151"}},{"resourceId":"sid-8B5050A2-DFC1-45BD-B830-9E2201E2D053","properties":{"overrideid":"sid-8B5050A2-DFC1-45BD-B830-9E2201E2D053","name":"","documentation":"","conditionsequenceflow":"","executionlisteners":{"executionListeners":[]},"defaultflow":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-893B76B0-999E-49F9-88E5-D157EC0A6137"}],"bounds":{"lowerRight":{"x":449.78125,"y":75},"upperLeft":{"x":400.21875,"y":75}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"sid-893B76B0-999E-49F9-88E5-D157EC0A6137"}},{"resourceId":"sid-87E479C4-52A7-406A-8C43-03E52A2F9FB7","properties":{"overrideid":"sid-87E479C4-52A7-406A-8C43-03E52A2F9FB7","name":"","documentation":"","conditionsequenceflow":"","executionlisteners":{"executionListeners":[]},"defaultflow":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-6CDC5DA2-950E-45F4-BDD6-8F28B8B844D6"}],"bounds":{"lowerRight":{"x":299.78125,"y":75},"upperLeft":{"x":250.21875,"y":75}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"sid-6CDC5DA2-950E-45F4-BDD6-8F28B8B844D6"}},{"resourceId":"sid-8DD35970-9779-4113-BEB3-9EE0659B5A8A","properties":{"overrideid":"sid-8DD35970-9779-4113-BEB3-9EE0659B5A8A","name":"","documentation":"","conditionsequenceflow":"","executionlisteners":{"executionListeners":[]},"defaultflow":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-47411F58-83E3-4EF0-BE3F-37C14422A3A0"}],"bounds":{"lowerRight":{"x":149.1953125,"y":75},"upperLeft":{"x":90.6484375,"y":75}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-47411F58-83E3-4EF0-BE3F-37C14422A3A0"}},{"resourceId":"sid-22B06C31-AFDB-43BC-9CFA-3C0819FB3BF9","properties":{"overrideid":"retry","name":"No","documentation":"","conditionsequenceflow":"","executionlisteners":{"executionListeners":[]},"defaultflow":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-F15382AC-8F08-4A32-9A9D-4D96901F18AD"}],"bounds":{"lowerRight":{"x":600.25,"y":180},"upperLeft":{"x":550.6875,"y":180}},"dockers":[{"x":20,"y":20},{"x":50,"y":40}],"target":{"resourceId":"sid-F15382AC-8F08-4A32-9A9D-4D96901F18AD"}},{"resourceId":"sid-8A0D9445-9FD1-4704-A26D-706D09894002","properties":{"overrideid":"exceedretries","name":"Yes","documentation":"","conditionsequenceflow":{"expression":{"index":"0","leftRestResponseId":"retrycount","rightValue":"2","operator":">","type":"variables"}},"executionlisteners":{"executionListeners":[]},"defaultflow":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-BDD5A696-4F8B-4CDA-A708-820F2BAF13E9"}],"bounds":{"lowerRight":{"x":620.5,"y":300},"upperLeft":{"x":550.89453125,"y":199.74999131955747}},"dockers":[{"x":20,"y":20},{"x":620.5,"y":300},{"x":50,"y":40}],"target":{"resourceId":"sid-BDD5A696-4F8B-4CDA-A708-820F2BAF13E9"}},{"resourceId":"sid-29901940-4556-4CAD-8A23-6808962C25CA","properties":{"overrideid":"sid-29901940-4556-4CAD-8A23-6808962C25CA","name":"","documentation":"","conditionsequenceflow":"","executionlisteners":{"executionListeners":[]},"defaultflow":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E47487B2-A1A2-488B-82D5-9C9A95A1B8AB"}],"bounds":{"lowerRight":{"x":609.9425032935401,"y":170.30602489468407},"upperLeft":{"x":396.0045101954814,"y":116.82182962684554}},"dockers":[{"x":15,"y":15},{"x":570.2000122070312,"y":132},{"x":20,"y":20}],"target":{"resourceId":"sid-E47487B2-A1A2-488B-82D5-9C9A95A1B8AB"}},{"resourceId":"sid-BC7932E6-28F5-4C17-B4A1-61BFF57DB971","properties":{"overrideid":"sid-2421A5AB-6624-4CDB-BFAF-6B1DB5C3D8E9","name":"","documentation":"","errorref":"","cancelactivity":true,"executionlisteners":{"executionListeners":[]},"asynchronousdefinition":false,"exclusivedefinition":false},"stencil":{"id":"BoundaryErrorEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-29901940-4556-4CAD-8A23-6808962C25CA"}],"bounds":{"lowerRight":{"x":395.16152823219454,"y":130.44138365274893},"upperLeft":{"x":365.16152823219454,"y":100.44138365274893}},"dockers":[{"x":68.71315660487545,"y":65.09110081510873}]},{"resourceId":"sid-F630CAEE-FD84-44CE-A4D3-A933CB036D7F","properties":{"overrideid":"sid-F630CAEE-FD84-44CE-A4D3-A933CB036D7F","name":"","documentation":"","conditionsequenceflow":"","executionlisteners":{"executionListeners":[]},"defaultflow":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-6CDC5DA2-950E-45F4-BDD6-8F28B8B844D6"}],"bounds":{"lowerRight":{"x":377.6653132946656,"y":201.15728739182447},"upperLeft":{"x":350,"y":115.42415230994516}},"dockers":[{"x":15.5,"y":15.5},{"x":350,"y":201.15728739182447},{"x":50,"y":40}],"target":{"resourceId":"sid-6CDC5DA2-950E-45F4-BDD6-8F28B8B844D6"}},{"resourceId":"sid-42058F17-D3EB-4E2D-9427-512ADDF6D52B","properties":{"overrideid":"sid-42058F17-D3EB-4E2D-9427-512ADDF6D52B","name":"","documentation":"","timercycledefinition":"","timerdatedefinition":"","timerdurationdefinition":"PT1M","cancelactivity":true,"executionlisteners":{"executionListeners":[]},"asynchronousdefinition":false,"exclusivedefinition":false},"stencil":{"id":"BoundaryTimerEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-F630CAEE-FD84-44CE-A4D3-A933CB036D7F"}],"bounds":{"lowerRight":{"x":403.2271487197836,"y":170.15728739182447},"upperLeft":{"x":372.2271487197836,"y":139.15728739182447}},"dockers":[{"x":-62.2728512802164,"y":14.657287391824468}]},{"resourceId":"sid-F31EF6C8-5543-4E78-8002-A5545C189663","properties":{"overrideid":"successful","name":"Yes","documentation":"","conditionsequenceflow":"","executionlisteners":{"executionListeners":[]},"defaultflow":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-D44D3BDC-E34B-44F1-8619-DC4DA3563D89"}],"bounds":{"lowerRight":{"x":779.40625,"y":75},"upperLeft":{"x":640.03125,"y":75}},"dockers":[{"x":20,"y":20},{"x":14,"y":14}],"target":{"resourceId":"sid-D44D3BDC-E34B-44F1-8619-DC4DA3563D89"}},{"resourceId":"sid-E6592794-99FD-49A5-BEDF-99E7DB7BFE99","properties":{"overrideid":"notsuccessful","name":"No","documentation":"","conditionsequenceflow":{"expression":{"index":"0","leftRestResponseId":"requeststatus","rightValue":"SUCCESS","operator":"!=","type":"variables"}},"executionlisteners":{"executionListeners":[]},"defaultflow":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E47487B2-A1A2-488B-82D5-9C9A95A1B8AB"}],"bounds":{"lowerRight":{"x":620,"y":160.1328125},"upperLeft":{"x":620,"y":94.8671875}},"dockers":[{"x":20,"y":20},{"x":20,"y":20}],"target":{"resourceId":"sid-E47487B2-A1A2-488B-82D5-9C9A95A1B8AB"}}],"bounds":{"lowerRight":{"x":1200,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}}